<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tootronome</title>
<style>
  body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #222; color: white; }
  .card { background: #333; padding: 20px; border-radius: 12px; text-align: center; max-width: 300px; }
  input, button { margin-top: 10px; }
</style>
</head>
<body>
<div class="card">
  <h1>ðŸ’¨ Tootronome</h1>
  <label>BPM (Farts per minute): 
    <input id="bpm" type="number" min="20" max="300" value="100">
  </label>
  <br>
  <label>Volume:
    <input id="volume" type="range" min="0" max="1" step="0.01" value="0.8">
  </label>
  <br>
  <button id="toggle">Start</button>
</div>

<script>
(() => {
  const bpmInput = document.getElementById('bpm');
  const volumeInput = document.getElementById('volume');
  const toggleBtn = document.getElementById('toggle');

  let isRunning = false;
  let intervalId = null;

  // Load your fart sound
  const fartSound = new Audio("fart.mp3"); // put your file in same folder
  fartSound.preload = "auto";

  function playFart() {
    const fart = fartSound.cloneNode(); // clone so it overlaps cleanly
    fart.volume = parseFloat(volumeInput.value);
    fart.play();
  }

  function startMetronome() {
    const bpm = Math.max(20, Math.min(300, parseInt(bpmInput.value, 10) || 100));
    const interval = 60000 / bpm; // ms between beats
    playFart(); // immediate first
    intervalId = setInterval(playFart, interval);
  }

  function stopMetronome() {
    clearInterval(intervalId);
    intervalId = null;
  }

  toggleBtn.addEventListener('click', () => {
    if (!isRunning) {
      startMetronome();
      toggleBtn.textContent = "Stop";
    } else {
      stopMetronome();
      toggleBtn.textContent = "Start";
    }
    isRunning = !isRunning;
  });
})();
</script>
</body>
</html>